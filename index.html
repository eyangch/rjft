<!DOCTYPE HTML>
<html>
    <head>
        <title>R&J Family Tree</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/p5@1.2.0/lib/p5.js"></script>
    </head>
    <body style="margin:20px">
        <h3>Romeo and Juliet Family Tree</h3>
        <p>By: Eric Yang</p>
        <p><strong>Instructions: </strong>Click on a bubble to get more info about that character. If the interactive doesn't work, <a href="https://drive.google.com/file/d/1g6XIHdGwJ68Vt0R5rwj_I2PE3Nc-npwr/view?usp=sharing">this video</a> contains a basic demonstration.</p>
        <p>Take a peek at the code <a href="https://github.com/eyangch/rjft/blob/main/index.html" target="_blank" rel="noopener noreferrer">here</a>!</p>
        <div style="display:inline">
            <main></main>
            <p id="info" style="font-size: 16px"><strong>Welcome</strong></br>Click on a character to get more info!</p>
        </div>
        <script type="text/javascript">
            var info =
                [
                    "<img src=\"https://i.pinimg.com/originals/87/f1/ee/87f1eebf9f82b4bb355336667b7c8611.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Montagues</strong></br>The Montague family is one of the two feuding families in Verona. The Montague family consists of Lord Montague, Lady Montague, Romeo, and other relatives.",

                    "<img src=\"https://i.pinimg.com/originals/c7/46/eb/c746eb643cf32a4cb140290b90fb7410.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Capulets</strong></br>The Capulet family is one of the two feuding families in Verona. The Capulet family consists of Lord Capulet, Lady Capulet, Juliet, and other relatives.",

                    "<img src=\"https://i.pinimg.com/originals/8b/52/08/8b52085e13906828f5c9f1d2a0640522.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Lord Montague</strong></br>Lord Montague is the head of the Montague family and the father of Romeo. Like Lord Capulet, he violently despises the opposing family, as he tries to fight \"[t]hou villain Capulet\" with his sword, with only his wife holding him back (I.i.81).",

                    "<img src=\"https://static.wikia.nocookie.net/shakespeare/images/f/f5/8132923.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Lady Montague</strong></br>Lady Montague is the wife of Lord Montague and the mother of Romeo. Just like Lady Capulet, she is more peaceful than her husband, as she reprimanded Lord Montague, saying that he \"shalt not stir one foot to see a foe\" (I.i.82). By persuading her husband to remain calm and not act, she helped preserve peace in Verona.",

                    "<img src=\"https://cdn.quotesgram.com/img/14/48/750245823-Romeo-Montague-romeo-montague-1968-24056677-540-720.jpeg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Romeo</strong></br>Romeo, the son of Lord Montague and Lady Montague, is a central character in <em>Romeo and Juliet</em>. Towards the beginning, he is naive and doesn't understand the concept of love, believing that Rosaline is the girl he loves most. He remarks that no \"one is fairer than my love\" (I.ii.99), but a few moments later, he proclaims that compared to Juliet, he has \"ne'er saw true beauty till this night\" (I.v.60). The sight of Juliet erases his previous love instantly, emphasizing the naivety and shallowness lover towards Rosaline. He is also impulsive, as he does reckless things such as when Romeo \"leapt [the Capulet's] orchard wall\" trying to get a glimpse of Juliet (II.i.6), risking his life on a whim.",

                    "<img src=\"http://jordynromeoandjulietproject.weebly.com/uploads/1/7/2/3/17239580/1399937435.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Lord Capulet</strong></br>Lord Capulet is the head of the Capulet family and the father of Juliet. Like Lord Montague, he despises and feuds with the opposing family. When the servants of the family start fighting, he is eager to join, as he requests his wife to \"[g]ive [him his] long sword\" (I.i.76), looking to incite violence. However, he prevents violence during the Capulet party by acknowledging that Romeo is \"a virtuous and well-governed youth\" (I.v.77). His actions at the party show that he is not as violent as some of the other characters.",

                    "<img src=\"https://i.pinimg.com/originals/c7/8e/af/c78eafbfe20600c3964fc7ea29ae6e63.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Lady Capulet</strong></br>Lady Capulet is the wife of Lord Capulet and the mother of Juliet. Like Lady Montague, she looks to bring peace instead of violence, as she questions Lord Capulet why \"call he for a sword\" (I.i.77), insisting that he requires a crutch instead.",

                    "<img src=\"http://images4.fanpop.com/image/photos/22900000/Juliet-Capulet-Montague-1968-romeo-and-juliet-by-franco-zeffirelli-22928431-318-424.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Juliet</strong></br>Juliet is the daughter of Lord Capulet and Lady Capulet. She is the source of Romeo's true love, yet she shares much of Romeo's initial ignorance towards love. This is in part due to her inexperience with this topic, as it is a subject \"that [she] dream not of\" (I.iii.71). Her misunderstanding of the inner workings of love leads her to believe that she can control the amount of love she feels when she states that she will \"look to like [Paris], if looking like more\" (I.iii.103). Her first encounter with love is with Romeo, where she begins to grasp its depth and complexity. Also, Juliet is impatient, as her behavior with the nurse shows. When the Nurse complains about her aching body after her meeting with Romeo, Juliet does little to help. Instead, she is fixated on extracting information from her, anxiously waiting for \"[w]hat says [Romeo] of [their] marriage\" (II.v.50). The impatience displayed while waiting for a message from her love further shows the intensity and passion of her feelings towards Romeo.",

                    "<img src=\"https://pbs.twimg.com/profile_images/804537477340037120/X0H8ElxD_400x400.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Benvolio</strong></br>Benvolio is mature and peaceful compared to other characters. When the servants of the two families are fighting, Benvolio, despite being a Montague, steps in to break up the fight. He orders the servants to \"[p]ut up [their] swords\" in order to preserve peace (I.i.66).",

                    "<img src=\"https://static.wikia.nocookie.net/totalwar-ar/images/2/20/Tybalt.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Tybalt</strong></br>Tybalt is a Capulet who unlike Benvolio, endorses the idea of fighting between the two families. He declares to Benvolio that he \"hate hell, all Montagues, and thee\" (I.i.72), and when he discovers Romeo at the Capulet's party he attempts to persuade Lord Capulet to allow him to fight \"that villain Romeo\" (I.v.73).",

                    "<img src=\"https://i.pinimg.com/originals/bf/69/e1/bf69e190dd59672a54b22d280827b02d.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Paris</strong></br>Paris is Juliet's suitor and kin to Verona's ruler, Prince Escalus. He wishes to one day marry Juilet.",

                    "<img src=\"https://i.pinimg.com/originals/4c/f8/6a/4cf86abd8c586da51af8c6665f521e65.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Mercutio</strong></br>Mercutio is a friend of Romeo and Benvolio with blood ties to the Prince and Paris. He jokes about and frowns upon Romeo's ignorance and attitude towards love, stating that \"if love be blind, love cannot hit the mark\" (II.i.36), revealing Mercutio's belief that Romeo's love towards Rosaline is blind and misguided.",

                    "<img src=\"https://pbs.twimg.com/profile_images/575447051208515584/xXyUVM6A_400x400.jpeg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Prince Escalus</strong></br>Prince Escalus is the ruler of Verona, and he is fed up with Montague and Capulet feud. He is exasperated that the constant fighting between the two families \"disturb[s] the quiet of [Verona's] streets\" (I.i.93), and he warns that their \"lives shall pay the forfeit of the peace\" if another fight occurs (I.i.99).",

                    "<img src=\"https://i.pinimg.com/originals/30/97/c5/3097c510de142943821400aa1508a44a.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Friar Laurence</strong></br>Romeo and Juliet go to Friar Laurence to be married, and he does so in order to try and get rid of the hatred between the two families. He hopes that a happy marriage between the two families will turn the \"households' rancor to pure love\" (II.iii.99).",

                    "<img src=\"https://i.pinimg.com/originals/68/59/4e/68594eca6e00ffda27b0007976c52432.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Nurse</strong></br>The Nurse is Juliet's caretaker. She is a mother figure to Juliet, as she is the one who raised Juliet. The Nurse is also hard-working. She dutifully carries out her task as an intermediary between Romeo and Juliet. Even as her head \"beats as if it would fall in twenty pieces\" (II.v.52), she relays the information back to Juliet. This determination to get a job done despite the physical pain shows the devotion the Nurse has towards Juliet.",

                    "<img src=\"https://i.pinimg.com/originals/6b/fe/79/6bfe79c82a0006b50bb889fcd6b5b03a.jpg\" height=\"200\" style=\"float:left;margin:10px\"><strong>Rosaline</strong></br>Rosaline was Romeo's previous love, but she did not return Romeo's feelings. However, despite Romeo's previous obsession over her, he immediately forgets about Rosaline after he catches a glimpse of Juliet."
                ];

            const WIDTH = 900;
            const HEIGHT = 500;

            var min_size = 40;
            var max_size = 70;
            var delta_size = 0.3;

            var xloc = [0,  1000, 0, 150, 200, 950, 1050, 800,   0, 1100,   700, 50, 600, 500,   870, 500];
            var yloc = [100, 150, 300, 300, 500, 300, 300, 500, 200, 200,    550, 500, 600, 500,   550, 250];
            var big = [true, true, false, false, false, false, false, false, false, false, false, false, false, false, false, false];
            var sz = [min_size, min_size, min_size, min_size, min_size, min_size, min_size, min_size, min_size, min_size, min_size, min_size, min_size, min_size, min_size, min_size];
            var dx = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            var dy = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
            var color_id = [0, 1, 0, 0, 0, 1, 1, 1, 0, 1, 1, 0, 2, 2, 1, 2];
            var txt = ["Montagues", "Capulets", "Lord Montague", "Lady Montague", "Romeo", "Lord Capulet", "Lady Capulet", "Juliet", "Benvolio", "Tybalt", "Paris", "Mercutio", "Prince Escalus", "Friar Laurence", "Nurse", "Rosaline"];
            var graph = [[2, 3, 8], [5, 6, 9], [0, 3, 4], [0, 2, 4], [2, 3, 7, 8, 11, 13, 15], [1 ,6, 7], [1, 5, 7], [4, 5, 6, 9, 10, 13, 14], [0, 4, 11], [1, 7], [7, 11, 12], [4, 8, 10, 12], [10, 11], [4, 7], [7], [4]];
            var xtra_dist = [[10, 12], [12, 10], [11, 12], [12, 11]];
            var long_dist = [[4, 8], [8, 4], [0, 8], [8, 0], [1, 9], [9, 1], [4, 7], [7, 4]];
            var med_dist = [[4, 8], [8, 4], [7, 9], [9, 7], [10, 11], [11, 10], [0, 12], [12, 0], [1, 12], [12, 1], [8, 11], [11, 8]];
            var colors = [[255, 151, 128], [120, 183, 255], [255, 100, 255]];

            var wall_buffer = 10;
            var wall_force = 40;

            var edge_size = 70;

            var friction = 0.87;

            var obj_buff = 40;

            function collide(id){
                if(dist(mouseX, mouseY, xloc[id], yloc[id]) < sz[id]){
                    return true;
                }
                return false;
            }

            function wall_force_x(id){
                let ret_f = 0;
                let d1 = (xloc[id] - sz[id]);
                ret_f += Math.max(0, wall_buffer - d1) / wall_force;
                let d2 = (WIDTH - xloc[id] - sz[id]);
                ret_f -= Math.max(0, wall_buffer - d2) / wall_force;
                return ret_f;
            }

            function wall_force_y(id){
                let ret_f = 0;
                let d1 = (yloc[id] - sz[id]);
                ret_f += Math.max(0, wall_buffer - d1) / wall_force;
                let d2 = (HEIGHT - yloc[id] - sz[id]);
                ret_f -= Math.max(0, wall_buffer - d2) / wall_force;
                return ret_f;
            }

            function edge_force(id, id2){
                let len = dist(xloc[id], yloc[id], xloc[id2], yloc[id2]) - sz[id] - sz[id2];
                let xdist = xloc[id2] - xloc[id];
                let ydist = yloc[id2] - yloc[id];
                let minus = edge_size;
                for(let i = 0; i < xtra_dist.length; i++){
                    if(xtra_dist[i][0] == id && xtra_dist[i][1] == id2){
                        minus = edge_size * 0.8;
                    }
                }
                for(let i = 0; i < long_dist.length; i++){
                    if(long_dist[i][0] == id && long_dist[i][1] == id2){
                        minus = edge_size * 3;
                    }
                }
                for(let i = 0; i < med_dist.length; i++){
                    if(med_dist[i][0] == id && med_dist[i][1] == id2){
                        minus = edge_size * 2;
                    }
                }
                let b_force = (len - minus) / 100;
                let mp = b_force / (Math.sqrt(xdist * xdist + ydist * ydist));
                return [xdist * mp, ydist * mp];
            }

            function obj_force(id, id2){
                let len = dist(xloc[id], yloc[id], xloc[id2], yloc[id2]) - sz[id] - sz[id2];
                if(len > obj_buff){
                    return [0, 0];
                }
                let xdist = xloc[id2] - xloc[id];
                let ydist = yloc[id2] - yloc[id];
                let minus = obj_buff;
                let b_force = (len - minus) / 100;
                let mp = b_force / (Math.sqrt(xdist * xdist + ydist * ydist));
                return [xdist * mp, ydist * mp];
            }

            function setup(){
                createCanvas(WIDTH, HEIGHT);
            }

            function draw(){
                background(220);

                // Size Manipulation
                for(let i = 0; i < xloc.length; i++){
                    let csz = map(sz[i], min_size, max_size, 0, 1);
                    if(big[i] || collide(i)){
                        let inv = Math.min(delta_size, (1/(csz+1)) - 0.5);
                        csz += inv;
                    }else{
                        let inv = Math.min(delta_size, (1/(2-csz)) - 0.5);
                        csz -= inv;
                    }
                    sz[i] = map(csz, 0, 1, min_size, max_size);
                }

                // Force Calculation
                for(let i = 0; i < xloc.length; i++){
                    let f_x = wall_force_x(i);
                    let f_y = wall_force_y(i);
                    for(let j = 0; j < graph[i].length; j++){
                        let c_ar = edge_force(i, graph[i][j]);
                        f_x += c_ar[0];
                        f_y += c_ar[1];
                    }
                    for(let j = 0; j < xloc.length; j++){
                        if(i == j) continue;
                        let c_ar = obj_force(i, j);
                        f_x += c_ar[0];
                        f_y += c_ar[1];
                    }
                    dx[i] += f_x;
                    dy[i] += f_y;
                    dx[i] *= friction;
                    dy[i] *= friction;
                    xloc[i] += dx[i];
                    yloc[i] += dy[i];
                }

                // Display Connections
                for(let i = 0; i < xloc.length; i++){
                    for(let j = 0; j < graph[i].length; j++){
                        let x = graph[i][j];
                        stroke(0, 0, 0);
                        if(Math.max(i, x) == 13) stroke(255, 0, 0);
                        if(Math.min(i, x) == 4 && Math.max(i, x) == 7) stroke(220);
                        line(xloc[i], yloc[i], xloc[x], yloc[x]);
                    }
                }

                stroke(0);
                // Display Circles
                for(let i = 0; i < xloc.length; i++){
                    let c_ar = JSON.parse(JSON.stringify(colors[color_id[i]]));
                    if(collide(i)){
                        for(let j = 0; j < 3; j++){
                            c_ar[j] *= 0.9;
                        }
                    }
                    fill(color(c_ar[0], c_ar[1], c_ar[2]));
                    ellipse(xloc[i], yloc[i], sz[i]*2, sz[i]*2);
                    fill(0);
                    textAlign(CENTER);
                    textSize(11);
                    if(big[i] || collide(i)){
                        textSize(20);
                    }
                    noStroke();
                    text(txt[i], xloc[i], yloc[i]);
                    stroke(0);
                }
            }

            function mousePressed(){
                for(let i = 0; i < xloc.length; i++){
                    if(collide(i)){
                        document.getElementById("info").innerHTML = info[i];
                        sz[i] += 20;
                    }
                }
            }
        </script>
    </body>
</html>
